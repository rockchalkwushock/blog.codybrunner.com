---
export interface Props {
	readonly date: Date
	readonly format?: 'short' | 'medium' | 'long'
}

const formatMap: Record<
	'short' | 'medium' | 'long',
	Intl.DateTimeFormatOptions
> = {
	short: { day: '2-digit', month: '2-digit', year: 'numeric' },
	medium: { day: 'numeric', month: 'short', year: 'numeric' },
	long: { day: 'numeric', month: 'long', year: 'numeric' },
}

const { date, format = 'medium' } = Astro.props

const { locale } = new Intl.DateTimeFormat().resolvedOptions()

const formattedDate = new Intl.DateTimeFormat(locale, formatMap[format]).format(
	date
)
---

<time datetime={date.toISOString()}>{formattedDate}</time>
